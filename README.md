ОБЩАЯ ПОСТАНОВКА

Задание ориентировано на решение задач разработки сервисов в составе абстрактной площадки онлайн торговли с функциями агрегатора магазинов (товарных предложений) в широком диапазоне пользовательских запросов. Примеры: Ozon, Wildberries, Beru.ru, AliExpress.


ЗАДАЧА №1

Спроектировать базу данных со следующим минимальным набором таблиц:

1. Пользователь - User(id, name, surname, fathers_name, email);
2. Товар(Книга) - Book(id, name, author, isbn);
3. Магазин - Shop(id, name, address, post_code);
4. Заказ - Order(id, reg_date(дата оформления заказа), user_id(внешгий ключ для User.id));
5. Позиция заказа - OrderItem(id, order_id(внешний ключ для Order.id), book_id(внешний ключ для Book.id), book_quantity(количество экземпляров книги), shop_id(внешний ключ для Shop.id)).
6. **Создана доп. Таблица – Stock (id, shop_id (внешний ключ для Shop.id), book_id (внешний ключ для Book.id), available qt) для возможности просмотра ассортимента определенного магазина**

Таблицы БД необходимо заполнить произвольными данными (количество записей не имеет значения). Выбор СУБД остается за Соискателем, в рамках тестового задания можно ограничиться sqlite.

**БД инициализируется файлом utils/init_db.py. В файле два метода**
1.	**create_database – создает саму БД в папке database и соответствующие таблицы**
2.	**fillin_database -  заполняет произвольными данными таблицы из csv файлов в папке static**


ЗАДАЧА №2

**API запускается из файла main.py (предполагается, что к этому моменту БД создана и проинициализирована)**

Реализовать API со следующим набором функций:

1. Получение данных пользователя (имя, адрес эл. Почты и т.п.); **осуществляется GET запросом вида localhost:8080/userinfo?user_id=97**
2. Просмотр истории заказов пользователя; **осуществляется GET запросом вида localhost:8080/userorders?user_id=2**
3. Добавление нового заказа (N книг каждая из которых в M количестве); **осуществляется POST запросом вида localhost:8080/neworder. Ниже список аргументов «ключ-значение»**
* **Ключ book_quantity, значение вида {"4":6,"8":1} (где в качестве ключа передается book_id, в качестве значения кол-во)**
* **Ключ user_id, значение число**
* **Ключ shop_id, значение число**
4. Просмотр ассортимента определенного магазина; **осуществляется GET запросом вида localhost:8080/shopassortment?shop_id=22**
 
Методы для каждого из запросов («GET», «POST», «PUT» и др.) Соискатель может назначить самостоятельно. Нет необходимости в реализации графического или веб интерфейса— все запросы будут тестироваться с помощью Postman. Фреймворк для написания API — aiohttp. Библиотека для общения с базой данных — sqlalchemy. 

Дополнительно приветствуется:

1. Добавление логгирования;
2. Написание скрипта для создания и заполнения тестовой базы данных дабы облегчить тестирование полученной программы;
3. Написание setup.py или requirements.txt с указанием зависимостей;
4. Добавление краткого туториала с описанием запуска программы и требований, необходимых для ее работы;
5. Краткое документирование кода.

Вся работа должна выполняться на python 3.5 или более поздних версий. Результат необходимо разместить в публичном репозитории.




